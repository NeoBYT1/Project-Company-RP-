<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gerador By NeoB</title>
<style>
:root{--bg:#0b0b0f;--card:#0f1720;--accent:#ff7a18;--muted:#9aa4b2}
*{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
body{margin:0;background:linear-gradient(180deg,var(--bg),#071017);color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
.wrap{width:980px;max-width:96%;display:grid;grid-template-columns:1fr 320px;gap:16px}
.card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:18px;border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6);}
header{display:flex;align-items:center;gap:12px}
.logo{width:50px;height:50px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#ffb36b);display:flex;align-items:center;justify-content:center;font-weight:800;color:#08121a}
h1{font-size:18px;margin:0}
p.lead{margin:6px 0 0;color:var(--muted);font-size:13px}
.display{margin-top:14px;padding:16px;border-radius:10px;background:rgba(0,0,0,0.22);display:flex;flex-direction:column;gap:8px}
.account{font-family:monospace;background:rgba(255,255,255,0.03);padding:12px;border-radius:8px;font-size:15px;word-break:break-all}
.controls{display:flex;gap:8px}
button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:9px 10px;border-radius:8px;cursor:pointer;color:inherit}
.primary{background:linear-gradient(90deg,var(--accent),#ffb36b);color:#08121a;border:0}
.copy{font-size:13px}
.side{display:flex;flex-direction:column;gap:10px}
.accounts-list{max-height:360px;overflow:auto;padding:10px;border-radius:8px;background:rgba(255,255,255,0.02)}
.accounts-list li{padding:6px 8px;border-radius:6px;margin-bottom:6px;background:rgba(0,0,0,0.12);font-family:monospace}
.hint{font-size:12px;color:var(--muted)}
footer{margin-top:10px;font-size:12px;color:var(--muted)}
.small{font-size:12px;color:var(--muted)}
.actions{display:flex;gap:8px;flex-wrap:wrap}
input[type="text"], input[type="password"]{width:100%;padding:9px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}

/* overlay de bloqueio */
#lockOverlay{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(2,6,23,0.95),rgba(2,6,23,0.88));z-index:9999;
}
.lockBox{width:420px;max-width:94%;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:20px;border-radius:12px;text-align:center;box-shadow:0 10px 40px rgba(0,0,0,0.6)}
.lockBox h2{margin:0 0 8px}
.lockHint{font-size:13px;color:var(--muted);margin-bottom:12px}
.lockActions{display:flex;gap:8px;justify-content:center;margin-top:12px}
.lockMsg{font-size:13px;color:#f8d7da;background:#3b0f12;padding:8px;border-radius:8px;display:none;margin-top:10px}
</style>
</head>
<body>
<!-- Overlay de bloqueio -->
<div id="lockOverlay" aria-hidden="false">
  <div class="lockBox" role="dialog" aria-modal="true" aria-labelledby="lockTitle">
    <div class="logo" style="margin:0 auto 12px;width:60px;height:60px">NB</div>
    <h2 id="lockTitle">Acesso restrito</h2>
    <div class="lockHint">Digite a senha mestra para liberar o sistema.</div>
    <input id="masterPwd" type="password" placeholder="Senha mestra" autocomplete="off" />
    <div class="lockActions">
      <button id="unlockBtn" class="primary">Desbloquear</button>
      <button id="clearSession">Limpar sessão</button>
    </div>
    <div id="lockMsg" class="lockMsg">Senha incorreta</div>
  </div>
</div>

<div class="wrap" id="appContent" aria-hidden="true">
  <div class="card">
    <header>
      <div class="logo">NB</div>
      <div>
        <h1>Gerador By NeoB <span class="small">(simulado)</span></h1>
        <p class="lead">Clique em Gerar Conta para digitar a senha (quando necessário). Revele email+senha clicando em "Revelar Conta".</p>
      </div>
    </header>

    <div class="display">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
        <div>
          <div class="small">Conta selecionada</div>
          <div id="account" class="account">Clique em "Gerar Conta" para processar a próxima conta.</div>
        </div>
        <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
          <div class="controls">
            <button id="generate" class="primary">Gerar Conta</button>
            <button id="reveal">Revelar Conta</button>
          </div>
          <div style="display:flex;gap:8px;margin-top:4px">
            <button id="copy" class="copy">Copiar Conta</button>
          </div>
        </div>
      </div>
      <div class="small">Stock: <span id="stock">6</span></div>
    </div>
  </div>

  <aside class="side card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <strong>Contas em stock</strong>
      <span class="small">Total: <span id="total">6</span></span>
    </div>

    <ul id="list" class="accounts-list"></ul>

    <div>
      <input id="newAccount" type="text" placeholder="Adicionar email ou email:senha" />
      <div class="actions" style="margin-top:8px">
        <button id="add">Adicionar</button>
        <button id="clear">Limpar tudo</button>
      </div>
    </div>

    <div style="margin-top:8px">
      <div class="small">Exportar / copiar lista</div>
      <div style="display:flex;gap:8px;margin-top:6px">
        <button id="copyAll">Copiar tudo</button>
        <button id="export">Exportar .txt</button>
      </div>
    </div>
  </aside>
</div>

<script>
/* Senha mestra solicitada ao abrir a página */
const MASTER_PASSWORD = 'byneob5657';

/* contas fornecidas (email:senha) */
const raw = [
  'jdbrktes@mysteryzzz.life:1ejn0vc55f2u',
  'kqjh1ywc@mysteryzzz.life:gmp7700e1xap',
  'ty1vypfa@mysteryzzz.life:1o2fr0fqu0pc',
  '4ggunwxz@mysteryzzz.life:mup88kcql0hv',
  'h76irq55@mysteryzzz.life:xl9t4e5vy672',
  'w7vcind9@mysteryzzz.life:kp2uizgudz64'
];

/* estrutura interna: { email: '', password: '' } */
const accounts = raw.map(line => {
  const parts = line.split(':');
  return { email: parts[0] || '', password: parts[1] || '' };
});

let currentIndex = 0;
let currentPassword = '';
let revealed = false;

const listEl = document.getElementById('list');
const totalEl = document.getElementById('total');
const stockEl = document.getElementById('stock');
const accountEl = document.getElementById('account');
const generateBtn = document.getElementById('generate');
const revealBtn = document.getElementById('reveal');
const copyBtn = document.getElementById('copy');
const newAccountInput = document.getElementById('newAccount');
const addBtn = document.getElementById('add');
const clearBtn = document.getElementById('clear');
const copyAllBtn = document.getElementById('copyAll');
const exportBtn = document.getElementById('export');

const lockOverlay = document.getElementById('lockOverlay');
const masterPwdInput = document.getElementById('masterPwd');
const unlockBtn = document.getElementById('unlockBtn');
const lockMsg = document.getElementById('lockMsg');
const appContent = document.getElementById('appContent');
const clearSessionBtn = document.getElementById('clearSession');

function isUnlocked() {
  return sessionStorage.getItem('unlocked') === '1';
}

/* inicia: se já desbloqueado na sessão, remove overlay */
function initLockState() {
  if(isUnlocked()){
    lockOverlay.style.display = 'none';
    lockOverlay.setAttribute('aria-hidden','true');
    appContent.setAttribute('aria-hidden','false');
  } else {
    lockOverlay.style.display = 'flex';
    lockOverlay.setAttribute('aria-hidden','false');
    appContent.setAttribute('aria-hidden','true');
    masterPwdInput.focus();
  }
}

/* render da lista e estado dos botões */
function renderList() {
  listEl.innerHTML = '';
  accounts.forEach((a,i)=>{
    const li = document.createElement('li');
    li.textContent = (i+1)+'. '+a.email + (a.password ? '  • senha presente' : '  • sem senha');
    listEl.appendChild(li);
  });
  totalEl.textContent = accounts.length;
  stockEl.textContent = accounts.length;
  // gerar só se stock >0 e desbloqueado
  generateBtn.disabled = (accounts.length === 0) || (!isUnlocked());
  // reveal também exige senha atual preenchida
  revealBtn.disabled = !currentPassword;
}

/* desbloquear com a senha mestra */
unlockBtn.addEventListener('click', ()=>{
  const val = masterPwdInput.value || '';
  lockMsg.style.display = 'none';
  if(val === MASTER_PASSWORD){
    sessionStorage.setItem('unlocked','1');
    lockOverlay.style.display = 'none';
    lockOverlay.setAttribute('aria-hidden','true');
    appContent.setAttribute('aria-hidden','false');
    masterPwdInput.value = '';
    renderList();
  } else {
    lockMsg.textContent = 'Senha incorreta';
    lockMsg.style.display = 'block';
    masterPwdInput.value = '';
    masterPwdInput.focus();
  }
});

/* Enter no campo de senha */
masterPwdInput.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter') unlockBtn.click();
});

/* Limpar sessão (remove desbloqueio) */
clearSessionBtn.addEventListener('click', ()=>{
  sessionStorage.removeItem('unlocked');
  initLockState();
  renderList();
});

/* GERA: prepara a senha (sem exibir email).
   - Se a conta já tiver senha, usa ela.
   - Se não, pede ao usuário digitar (prompt sem default).
   NÃO incrementa currentIndex aqui; incrementa só ao REVELAR.
*/
generateBtn.addEventListener('click', ()=>{
  if(accounts.length === 0){ alert('Stock vazio!'); return; }
  if(!isUnlocked()){ alert('Sistema bloqueado. Digite a senha mestra ao abrir.'); return; }
  const acc = accounts[currentIndex];
  if(acc.password && acc.password.trim() !== ''){
    currentPassword = acc.password;
    revealed = false;
    accountEl.textContent = 'Senha: ' + currentPassword;
    renderList();
  } else {
    const pwd = prompt('Digite a senha para esta conta:');
    if(pwd === null || pwd.trim() === '') return;
    currentPassword = pwd;
    accounts[currentIndex].password = currentPassword; // salvar para reutilizar
    revealed = false;
    accountEl.textContent = 'Senha: ' + currentPassword;
    renderList();
  }
  // atualizar botão reveal
  revealBtn.disabled = !currentPassword;
});

/* REVELAR: exibe email:senha e só então avança o índice */
revealBtn.addEventListener('click', ()=>{
  if(!currentPassword){ alert('Clique em Gerar Conta primeiro!'); return; }
  if(accounts.length === 0){ alert('Stock vazio!'); return; }
  const acc = accounts[currentIndex];
  accountEl.textContent = acc.email + ':' + currentPassword;
  revealed = true;
  if(!acc.password || acc.password.trim() === '') acc.password = currentPassword;
  currentIndex = (currentIndex + 1) % accounts.length;
  // depois de revelar, atualizar estado dos botões
  renderList();
});

/* COPIAR: só se já revelou (proteção UX) */
copyBtn.addEventListener('click', async ()=>{
  if(!revealed){ alert('Revele a conta primeiro!'); return; }
  try { await navigator.clipboard.writeText(accountEl.textContent); alert('Conta copiada!'); }
  catch(e) { prompt('Copie manualmente:', accountEl.textContent); }
});

/* ADICIONAR: suporta "email:senha" ou só "email" */
addBtn.addEventListener('click', ()=>{
  const v = newAccountInput.value.trim();
  if(!v) return;
  const parts = v.split(':');
  const emailOnly = parts[0] || '';
  if(!emailOnly.includes('@')) { alert('Email inválido'); return; }
  const pwd = parts[1] ? parts.slice(1).join(':') : ''; // permite ":" na senha
  accounts.push({ email: emailOnly, password: pwd });
  newAccountInput.value = '';
  renderList();
});

/* LIMPAR */
clearBtn.addEventListener('click', ()=>{
  if(!confirm('Limpar todas as contas?')) return;
  accounts.length = 0;
  currentPassword = '';
  revealed = false;
  currentIndex = 0;
  renderList();
  accountEl.textContent = 'Lista vazia.';
});

/* COPIAR TUDO (email:senha por linha) */
copyAllBtn.addEventListener('click', async ()=>{
  if(accounts.length === 0){ alert('Lista vazia'); return; }
  const text = accounts.map(a => a.email + ':' + (a.password || '')).join('\n');
  try { await navigator.clipboard.writeText(text); alert('Lista copiada!'); }
  catch(e) { prompt('Copie manualmente:', text); }
});

/* EXPORTAR .txt */
exportBtn.addEventListener('click', ()=>{
  if(accounts.length === 0){ alert('Lista vazia'); return; }
  const blob = new Blob([accounts.map(a => a.email + ':' + (a.password || '')).join('\n')], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'emails_stock.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
});

/* inicialização */
initLockState();
renderList();
</script>
</body>
</html>
